%
O09835 (SPC OFFSET UPDATE RENISHAW V3.11 FOR NGC)
G103 P1
#3001= 0
G04 P250
IF [ #3001 LT 200 ] GOTO999 (TEST RUNNING IN GRAPHICS)
IF [ #13 NE #0 ] GOTO1
#3000= 91 (M INPUT MISSING)
N1
IF [ #20 NE #0 ] GOTO2
#3000= 91 (T INPUT MISSING)
N2
IF [ #3 NE #0 ] GOTO3
#3= 3
N3
IF [ #[ 2001 + #13 ] GE #3 ] GOTO9
IF [ #[ 2001 + #13 ] LT 0 ] GOTO9
IF [ #[ 2001 + #13 ] EQ 0 ] GOTO4
GOTO5
N4
#[ 2000 + #13 ]= 0
N5
IF [ #22 EQ #0 ] GOTO6
IF [ ABS[ #193 ] LT #22 ] GOTO9
N6
#[ 2000 + #13 ]= #[ 2000 + #13 ] + #196
#[ 2001 + #13 ]= #[ 2001 + #13 ] + 1
IF [ #[ 2001 + #13 ] EQ #3 ] GOTO7
GOTO10
N7
(UPDATE)
IF [ #9 NE #0 ] GOTO8
#9= 1
N8
G65 P9732 T#20 C [ #[ 2000 + #13 ] / #3 * #9 ] Z#26
N9
#[ 2000 + #13 ]= 0
#[ 2001 + #13 ]= 0
N10
N999
G103
(G04 P1.0)
M99





%