%
O09811 (XYZ MEASURE RENISHAW V3.14 FOR NGC)
G103 P1
#3001= 0
G04 P250
IF [ #3001 LT 200 ] GOTO999 (TEST RUNNING IN GRAPHICS)
G65 P9724
G65 P9725 A1.
IF [ #19 EQ #0 ] GOTO1
IF [ #20 EQ #0 ] GOTO1
#3000= 91 (ST INPUT MIXED)
N1
IF [ #19 EQ #0 ] GOTO2
IF [ #11 EQ #0 ] GOTO2
#3000= 91 (SH INPUT MIXED)
N2
IF [ #20 EQ #0 ] GOTO3
IF [ #13 EQ #0 ] GOTO3
#3000= 91 (TM INPUT MIXED)
N3
#1= 185
WHILE [ #1 LE 199 ] DO1
#[ #1 ]= #0
#1= #1 + 1
END1
#10= #5041 (X START)
#12= #5042 (Y START)
G31 X [ #10 - #[ #161 + 2 ] ] Y [ #12 - #[ #161 + 3 ] ] F#169
IF [ ABS[ #5041 - [ #10 - #[ #161 + 2 ] ] ] GE #173 ] GOTO22
IF [ ABS[ #5042 - [ #12 - #[ #161 + 3 ] ] ] GE #173 ] GOTO22
#30= -1 (DIR FLAG)
IF [ #24 NE #0 ] GOTO5
IF [ #25 NE #0 ] GOTO7
(Z MOVE)
IF [ #26 EQ #0 ] GOTO225
#7= 5203
IF [ [ #5043 - #166 ] LT #26 ] GOTO4
#30= 1
N4
G65 P9726 Z#26 Q#17
IF [ #199 NE 0 ] GOTO21
#185= #10
#186= #12
#187= #176 - #166 (Z POS)
#188= #187
IF [ #8 EQ #0 ] GOTO45
#188= #188 + #[ 2000 + #8 ] (SIZE)
N45
#192= #187 - #26 (Z ERROR)
#193= #188 - #26 (SIZE ERROR)
#195= ABS[ #192 ] (T P ERR)
#196= #193 * #30 (METAL CON)
GOTO9
N5 (X MOVE)
IF [ #25 NE #0 ] GOTO225
IF [ #26 NE #0 ] GOTO225
#6= #[ #161 ]
#7= 5201
IF [ #5041 LT #24 ] GOTO6
#6= - #[ #161 ]
#30= 1
N6
G65 P9726 X#24 Q#17 S #[ #161 ]
IF [ #199 NE 0 ] GOTO21
#185= #174 + #6 + #[ #161 + 2 ] (COR SKIP POS)
#186= #12
#188= #185
IF [ #8 EQ #0 ] GOTO65
#188= #188 + #[ 2000 + #8 ] (ACT SIZE)
N65
#190= #185 - #24 (X ERROR)
#193= #188 - #24 (SIZE ERROR)
#195= ABS[ #190 ] (T P ERROR)
#196= #193 * #30 (METAL CON)
GOTO9
N7 (Y MOVE)
IF [ #26 NE #0 ] GOTO225
#6= #[ #161 + 1 ]
#7= 5202
IF [ #5042 LT #25 ] GOTO8
#6= - #[ #161 + 1 ]
#30= 1
N8
G65 P9726 Y#25 Q#17 S #[ #161 + 1 ]
IF [ #199 NE 0 ] GOTO21
#185= #10
#186= #175 + #6 + #[ #161 + 3 ] (Y SKIP POS)
#188= #186
IF [ #8 EQ #0 ] GOTO85
#188= #188 + #[ 2000 + #8 ] (ACT SIZE)
N85
#191= #186 - #25 (ERROR)
#193= #188 - #25 (SIZE ERROR)
#195= ABS[ #191 ] (TP ERROR)
#196= #193 * #30 (METAL CON)
N9
#197= #30
IF [ #23 EQ #0 ] GOTO10
G65 P9730 H#11 M#13 S#19 T#20 W#23 X#24 Y#25 Z#26
N10
IF [ #21 EQ #0 ] GOTO11 (U UPPER TOL)
IF [ ABS[ #193 ] GE #21 ] GOTO23
IF [ #195 GE #21 ] GOTO23
N11
IF [ #11 EQ #0 ] GOTO13
IF [ ABS[ #193 ] LT #11 ] GOTO12
#198= 1
N12
IF [ #170 AND 4 EQ 4 ] GOTO13
IF [ ABS[ #193 ] LT #11 ] GOTO13
G00 X#10 Y#12
#[ 3006 - [ [ #170 AND 8 ] / 8 * 6 ] ]= 1 (OUT OF TOL)
N13
IF [ #13 EQ #0 ] GOTO15
IF [ ABS[ #195 ] LT #13 / 2 ] GOTO14
#198= 2
N14
IF [ #170 AND 4 EQ 4 ] GOTO15
IF [ ABS[ #195 ] LT #13 / 2 ] GOTO15
G00 X#10 Y#12
#[ 3006 - [ [ #170 AND 8 ] / 8 * 6 ] ]= 1 (OUT OF POSITION)
N15
IF [ #20 EQ #0 ] GOTO19
IF [ ABS[ #196 ] LT #22 ] GOTO19 (NULL BAND)
IF [ #9 NE #0 ] GOTO16
#9= 1
N16
G65 P9732 T#20 C [ #196 * #9 ] Z#26
N19
IF [ #19 EQ #0 ] GOTO24
G65 P9732 S#19 Z#26 W1.
GOTO24
N21
IF [ #199 NE 2 ] GOTO22
G00 X#10 Y#12
#3000= 93 (SURFACE NOT FOUND)
N22
G00 X#10 Y#12
#3000= 92 (UNEXPECTED SURFACE FOUND)
N225
G00 X#10 Y#12
#3000= 91 (XYZ INPUT MIXED)
N23
#198= 3
IF [ #170 AND 4 EQ 4 ] GOTO24
G00 X#10 Y#12
#[ 3006 - [ [ #170 AND 8 ] / 8 * 6 ] ]= 1 (UPPER TOL EXCEEDED)
N24
G00 X#10 Y#12
N999
G103
(G04 P1.0)
M99



%