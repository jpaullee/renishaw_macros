%
O09377 (OTS TOOL SET RENISHAW V3.14 FOR NGC)
(G65 P9377 HTOOL OFFSET # KZ DISTANCE DAPPROX DIA E APPROX LENGTH)
G103 P1
#3001= 0
G04 P250
IF [ #3001 LT 200 ] GOTO999 (TEST RUNNING IN GRAPHICS)
#161= 556 (START CALIBRATION VARIABLE)
#179= 1 / 25.4
IF [ #4006 EQ 20 ] GOTO1
IF [ #4006 EQ 70 ] GOTO1
#179= 1
N1
(TOOL SETTING AUTO LENGTH ONLY)
IF [ #[ #161 + 26 ] EQ 0 ] GOTO90
IF [ #[ #161 + 26 ] EQ #0 ] GOTO90
G65 P9024 (Z HOME)
G49
G90
#174= 0
M98 P9799
G103 P1
#27= #5021 - #5041
#30= #5022 - #5042
#31= #5023 - #5043
#3004= 0
G00 X [ #167 - #27 + #4 ] Y [ #168 - #30 + #5 ]
G65 P9855 (OTS FLASHON)
G103 P1
#3004= 2
M79 G31 Z [ - [  [ #30003.036 - 12.7  ] * #179 ] - #31 ] F [ 2032. * #179 ] (ADUST Z FOR SHORTEST TOOL) (storm)
#14= 0.5 (RESET COUNTER)
WH [ #11017 NE 0 ] DO1 (WAIT FOR STYLUS SEATED) (storm)
IF [ #14 GT 30. ] GOTO30 (MOVE UP TO 15MM OFF)
G01 Z [ #5063 + [ #14 * #179 ] ] F [ 2032. * #179 ] (ADJUST #14 BACK OFF STEP)
#14= #14 + 0.5
END1
G103 P1
#28= #5043 - [ 10 * #179 ]
#32= #5043 + [ 10 * #179 ]
M79 G31 Z#28 F [ 30 * #179 ]
G04 P160 (M98 P9854)
G01 Z#32 F [ 2032. * #179 ]
#3004= 0
#8= #5063 + #31 - #163
#[ 2000 + #11 ]= #8
#[ 2200 + #11 ]= 0
#6= #6 + [ #5043 - #5063 ] (ADD Z DEEP FROM DISK FACE)
G103 P1
IF [ #7 EQ #0 ] GOTO5
G65 P9852 S#7 D#11 Z - [ #6 ]
N5
G65 P9024 (Z HOME)
G90
GOTO999
N30 #3000= 92 (UNEXPECTED SURFACE FOUND)
N90 #3000= 10 (OTS NOT CALIBRATED)
N999
G103
(G04 P1.0)
M99



%